#!/bin/bash

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤–∏–¥–µ–æ —Å–∏—Å—Ç–µ–º—ã Raspberry Pi

echo "üé• –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤–∏–¥–µ–æ —Å–∏—Å—Ç–µ–º—ã Raspberry Pi..."
echo "============================================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º GPU –ø–∞–º—è—Ç—å
echo "üìä GPU –ø–∞–º—è—Ç—å:"
vcgencmd get_mem gpu

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –¥–∏—Å–ø–ª–µ—è
echo ""
echo "üñ•Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∏—Å–ø–ª–µ–µ:"
tvservice -s
tvservice -m CEA
tvservice -m DMT

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
echo ""
echo "üîß –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–µ–∫–æ–≤:"
vcgencmd get_config gpu_mem
vcgencmd get_config decode_MPG2
vcgencmd get_config decode_WVC1

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∏–¥–µ–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
echo ""
echo "üìπ –í–∏–¥–µ–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:"
ls -la /dev/video* 2>/dev/null || echo "–í–∏–¥–µ–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º DRM —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
echo ""
echo "üéÆ DRM —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:"
ls -la /dev/dri/* 2>/dev/null || echo "DRM —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º framebuffer
echo ""
echo "üñºÔ∏è Framebuffer:"
ls -la /dev/fb* 2>/dev/null || echo "Framebuffer –Ω–µ –Ω–∞–π–¥–µ–Ω"

# –¢–µ—Å—Ç–∏—Ä—É–µ–º MPV —Å –≤–∏–¥–µ–æ
echo ""
echo "üé¨ –¢–µ—Å—Ç MPV (–¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–¥–µ–∫–∞—Ö):"
timeout 5 mpv --vo=help 2>/dev/null | head -10 || echo "MPV –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"

echo ""
echo "üîç –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:"
echo "1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ gpu_mem >= 128M –≤ /boot/config.txt"
echo "2. –î–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–∏–¥–µ–æ –¥–æ–±–∞–≤—å—Ç–µ –≤ /boot/config.txt:"
echo "   gpu_mem=128"
echo "   dtoverlay=vc4-kms-v3d"
echo "3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ RPi –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ config.txt
echo ""
echo "‚öôÔ∏è –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–µ–æ –≤ /boot/config.txt:"
grep -E "(gpu_mem|dtoverlay|hdmi_)" /boot/config.txt 2>/dev/null || echo "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"

echo ""
echo "‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
