#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã Aether Player
# UPDATED: 2025-08-06 v1

set -e

echo "üîÑ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã Aether Player..."

# 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ MPV
echo "‚èπÔ∏è  –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º MPV –ø—Ä–æ—Ü–µ—Å—Å—ã..."
sudo pkill -f mpv || true

# 2. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
echo "‚èπÔ∏è  –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
sudo pkill -f "python.*app" || true

# 3. –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo "‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."
sleep 3

# 4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
echo "üíæ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã..."
sync

# 5. –û—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HDD –µ—Å–ª–∏ –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
if mount | grep -q "/mnt/hdd"; then
    echo "üíø –û—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HDD..."
    sudo umount /mnt/hdd || {
        echo "‚ö†Ô∏è  –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ..."
        sudo umount -f /mnt/hdd || true
    }
    echo "‚úÖ HDD –æ—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω"
else
    echo "‚ÑπÔ∏è  HDD —É–∂–µ –æ—Ç–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω"
fi

# 6. –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
sync
sleep 1

echo "‚úÖ Aether Player –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω"
