# üöÄ Aether Player - Production Deployment Guide

## üìÇ –ù–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### üéØ `start_production.sh` - –û—Å–Ω–æ–≤–Ω–æ–π production —Å–µ—Ä–≤–µ—Ä
**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤ (fuser, lsof, kill)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (gunicorn, gevent)
- ‚úÖ Graceful shutdown —Å –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–æ–π —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ SIGINT, SIGTERM, EXIT

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
cd /home/eu/aether-player
./start_production.sh
```

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
- `Ctrl+C` - graceful shutdown —Å –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–æ–π
- –°–∏–≥–Ω–∞–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –æ—á–∏—â–∞—é—Ç –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã

---

### üßπ `cleanup.sh` - –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üî• –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- üîß –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ fuser –∏ lsof
- üóÇÔ∏è –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (logs, PID files)
- üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- üé® –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
cd /home/eu/aether-player
./cleanup.sh
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –°–µ—Ä–≤–µ—Ä "–∑–∞–≤–∏—Å" –∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ Ctrl+C
- –û—Å—Ç–∞–ª–∏—Å—å "–∑–æ–º–±–∏" –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ—Å–ª–µ –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- –ü–æ—Ä—Ç 5000 –∑–∞–Ω—è—Ç –ø–æ—Å–ª–µ –∫—Ä–∞—Ö–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–æ–º –¥–ª—è "—á–∏—Å—Ç–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞"

---

## üîÑ Workflow –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. **–û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫**
```bash
./start_production.sh
# Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ - –≤—Å–µ –æ—á–∏—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### 2. **–ü–æ—Å–ª–µ –∫—Ä–∞—Ö–∞/–∑–∞–≤–∏—Å–∞–Ω–∏—è**
```bash
./cleanup.sh           # –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
./start_production.sh  # –ß–∏—Å—Ç—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã**
```bash
./cleanup.sh  # –ü–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ—Ä—Ç–æ–≤ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Gunicorn:
- **Worker:** `gevent` (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å Flask-SocketIO)
- **Connections:** 1000 per worker
- **Timeout:** 120 —Å–µ–∫—É–Ω–¥
- **Max requests:** 1000 —Å jitter 100
- **Bind:** `0.0.0.0:5000` (–¥–æ—Å—Ç—É–ø –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤:
- **SIGINT** (Ctrl+C) ‚Üí graceful shutdown
- **SIGTERM** ‚Üí graceful shutdown  
- **EXIT** ‚Üí emergency cleanup

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞
- Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤

---

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

**–î–æ:** –†—É—á–Ω–∞—è –±–æ—Ä—å–±–∞ —Å –∑–∞–≤–∏—Å—à–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –ø–æ–∏—Å–∫ PID, kill -9, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ—Ä—Ç–æ–≤

**–ü–æ—Å–ª–µ:** 
- ‚ö° –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞
- üßπ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –ª—é–±–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏  
- üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- üí° –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–µ
- üöÄ –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ/–¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–µ

---

**üî• –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–∞ 90% –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ "–±–æ–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è" —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ –ø–æ—Ä—Ç–∞–º–∏!**
